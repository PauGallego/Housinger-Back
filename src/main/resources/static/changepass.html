<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Change Password</title>
    <style>
        /* Fonts */
        @import url("https://fonts.googleapis.com/css2?family=Karma:wght@300;400;500;600;700&display=swap");

        /* Reset Styles */
        body,
        html {
            font-family: "Karma", serif;
            margin: 0;
            padding: 0;
            background-color: #fafafa;
        }

        /* Header Styles */
        .contendor-header {
            background-color: #A5D7E8;
            height: 150px;
            width: 100%;
            display: flex;
            justify-content: flex-start;
            align-items: center;
        }

        .contendor-header img {
            height: 50px;
            width: auto;
            margin-left: 15px;
        }

        .titulo-logo {
            color: #576cbc;
            margin-left: 15px;
            font-size: 20px;
            font-weight: bold;
        }

        /* Form Styles */
        h2 {
            color: #576cbc;
            font-size: 25px;
            margin-top: 20px;
            margin-bottom: 20px;
            text-align: center;
        }

        .form-container {
            display: flex;
            justify-content: center;
            align-items: center;
        }

        form {
            background-color: #d0d6ea;
            padding: 10px;
            margin: 0 5px;
        }

        label {
            font-weight: bold;
            margin-left: 5px;
        }

        input[type="password"] {
            border: 2px solid #ccc;
            box-shadow: 1px 1px 1px #999;
            margin-left: 5px;
            margin-top: 2px;
        }

        .enviar-cambio {
            background-color: #576cbc;
            color: white;
            border: none;
            border-radius: 5px;
            height: 40px;
            width: 80px;
            margin-left: 5px;
        }

        .contedor-nombre {
            display: flex;
            justify-content: center;
            align-items: center;
            background-color: #576cbc;
            width: 200px;
            color: white;
            margin: auto;
            border-top-left-radius: 5px;
            border-top-right-radius: 5px;
        }

        .contedor-mensaje {
            display: flex;
            justify-content: center;
            align-items: center;
            background-color: #e2e8ff;
            width: 200px;
            color: red;
            margin: auto;
            border-bottom-left-radius: 5px;
            border-bottom-right-radius: 5px;
        }

        .flex{
            display: flex;
            justify-content: start;
            align-items: center;
            margin-left: 20px;
        }

    </style>
</head>
<body>
<div class="contendor-header">
    <div class="ml-5 md:ml-10 flex justify-start items-center">
        <img class="h-[50px] md:h-[60px] w-auto" src="https://housingerapi.paugallego.com/v1/fileCustomer/download/logo.png" alt="logo">
        <h2 class="titulo-logo text-[20px] md:text-[28px] md:mt-5 font-bold">HOUSINGER</h2>
    </div>
</div>
<h2>Cambio de contraseña</h2>
<div class="contedor-nombre">
    <p>Tu usuario: {{userName}}</p>
</div>

<div class="form-container">
    <form id="passwordForm" method="post">
        <input type="hidden" id="userId" name="id" value="{{userId}}">
        <input type="hidden" id="url" value="{{url}}">
        <label for="password">Contraseña:</label><br>
        <input type="password" id="password" name="password"><br><br>
        <label for="password2">Confirmar contraseña:</label><br>
        <input type="password" id="password2"><br><br>
        <input type="submit" value="Submit" class="enviar-cambio">
    </form>
</div>
<div class="contedor-mensaje">
    <span id="error-mensaje"></span>
</div>

<script>
    let errorMensaje = document.getElementById('error-mensaje');

    document.getElementById('passwordForm').addEventListener('submit', function (event) {
        event.preventDefault();
        let password = document.getElementById('password').value;
        let password2 = document.getElementById('password2').value;

        if (password.length < 8) {
            errorMensaje.innerText = 'La contraseña debe tener al menos 8 caracteres';
            return;
        }

        if (password !== password2) {
            errorMensaje.innerText = 'Las contraseñas no coinciden';
            return;
        }

        this.submit();
    });

    var url = document.getElementById('url').value;
    document.getElementById('passwordForm').action = url + '/v1/recover/success';
</script>
</body>
</html>